## В связи с особенностями физического расположения мощностей ВМ в зоне RU* ,использование AKS не представляется возможным либо требует больших временных ,финансовых и прочих трудозатрат.
Для выполнения задачи была развернута Виртуальная Машина на облачной платформе cloud.ru.

## Характеристики ноды
- vCPU: 2
- RAM: 4GB
- HDD: 30GB

## Компоненты
- Кластер Kubernetes с развернутым Nginx Ingress Controller
- Домен третьего уровня для тестового задания: turbonoda.rf.gd
- Установлен Cert-Manager для ротации сертификатов внутри Kubernetes кластера
- Используется Certbot для автоматизации получения и обновления сертификатов
- CRON для ежедневного запуска ротации сертификатов

## Работа с Cert-Manager и Certbot
В директории /opt/ssl_free/ расположены четыре ClusterIssuer:
- buypass-prod.yaml
- letsencrypt-prod.yaml
- sslforfree-prod.yaml
- zerossl-prod.yaml

Cert-Manager автоматически запрашивает и устанавливает SSL/TLS сертификаты для Ingress ресурсов от соответствующих поставщиков, указанных в ClusterIssuer. Certbot, встроенный в Cert-Manager, автоматически управляет процессом ротации сертификатов.

## Ротация сертификатов
Скрипт для ротации сертификатов расположен в директории /usr/local/bin/rotate_certs.sh и выполняет следующие действия:
1. Определяет список поставщиков сертификатов, включая Let's Encrypt, ZeroSSL, SSL For Free и Buypass.
2. Задает домен для получения сертификата (turbonoda.rf.gd) и директорию для хранения сертификатов /opt/cert/live/.
3. Выбирает случайного поставщика из списка и использует его для запроса сертификата с помощью Certbot.
4. Запускает Certbot с заданными параметрами, такими как email-адрес, URL выбранного поставщика и имя домена.
5. После получения сертификата скрипт выполняет перезагрузку Nginx для применения нового сертификата к серверу.

### В crontab автаматизирован запуска данного скрипта ежедневно в 2:00 AM
### Для ручного запуска скрипта выполнить команду /usr/local/bin/rotate_certs.sh
### Из-за географисекого расположения ВМ работа скрипта неполноценна и большинство провайдеров сертификатов не работают с зоной RU ,либо требуют регистрации не из зоны RU ,но данное исполнение задания позволяет понять логгику работы по выпуску и ротации сертификатов
